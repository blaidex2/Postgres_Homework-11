# Домашнее задание №11

## 1 вариант
Создать индексы на БД, которые ускорят доступ к данным.
В данном задании тренируются навыки:
•	определения узких мест
•	написания запросов для создания индекса
•	оптимизации
Необходимо:
1.	Создать индекс к какой-либо из таблиц вашей БД. Прислать результат команды explain, в которой используется данный индекс

 ![image](https://github.com/blaidex2/Postgres_Homework-11/assets/130083589/43652fec-124c-4de9-9024-5b660029e58c)


2.	Реализовать индекс для полнотекстового поиска
   
>alter table bookings.tickets add column tsv tsvector;
>
>update bookings.tickets set tsv = to_tsvector('english',contact_data);
>
>create index ticket_passenger_contacts on bookings.tickets using gin (tsv);
>
>explain select ticket_no, passenger_name, contact_data from bookings.tickets where tsv @@ to_tsquery('aivanov.15041972@postgrespro.ru');
>

![image](https://github.com/blaidex2/Postgres_Homework-11/assets/130083589/161105ac-41fb-416d-bdbc-2fba068082ce)
>Получаем значительное уменьшение стоимости запроса, благодаря индексу

4.	Реализовать индекс на часть таблицы или индекс на поле с функцией

![image](https://github.com/blaidex2/Postgres_Homework-11/assets/130083589/2437d783-82ae-4a09-b48c-a90f1dbfdccd)

> Видим значительное уменьшение стоимости запроса после применения индекса
 

5.	Создать индекс на несколько полей

![image](https://github.com/blaidex2/Postgres_Homework-11/assets/130083589/bca2b8c8-4c8f-435b-b326-74f137743306)

> Видим значительное уменьшение стоимости запроса после применения индекса	 

## 2 вариант

В результате выполнения ДЗ вы научитесь пользоваться
различными вариантами соединения таблиц.
В данном задании тренируются навыки:
•	написания запросов с различными типами соединений
Необходимо:
1.	Реализовать прямое соединение двух или более таблиц
   
>Получим бронирования с билетами:
>
![image](https://github.com/blaidex2/Postgres_Homework-11/assets/130083589/1817d57d-bdff-4a1c-86e6-66153a2babbd)
 

2.	Реализовать левостороннее (или правостороннее) соединение двух или более таблиц

>Найдем все рейсы с билетами без посадочных талонов:
>

![image](https://github.com/blaidex2/Postgres_Homework-11/assets/130083589/97e26402-17e1-43ca-886e-682f2afedf27)

3.	Реализовать кросс соединение двух или более таблиц
   
>Получим все возможные комбинации аэропортов и самолетов:
>

![image](https://github.com/blaidex2/Postgres_Homework-11/assets/130083589/ae076e38-28c9-4977-8024-10bc248d52f6)

 
4.	Реализовать полное соединение двух или более таблиц

>Полное соединение двух таблиц с соответствующими строками , если возможно то с обеих сторон. Если совпадений нет, отсутствующая сторона содержит значения NULL.
>
![image](https://github.com/blaidex2/Postgres_Homework-11/assets/130083589/e8258268-fe9f-4205-a376-fd5180f0a23c)


5.	Реализовать запрос, в котором будут использованы разные типы соединений
   
>Получим информацию по аэропортам отправления, номерам рейсов и свободным местам для отложенных рейсов:
>

 ![image](https://github.com/blaidex2/Postgres_Homework-11/assets/130083589/157c1543-9bfd-454f-bf10-26fc9752fe03)

## Задание со *

•	Придумайте 3 своих метрики на основе показанных представлений, отправьте их через ЛК, а так же поделитесь с коллегами в слаке

### Метрика №1. Самолеты, не совершившие ни одного перелета:

 ![image](https://github.com/blaidex2/Postgres_Homework-11/assets/130083589/c9357653-8e3b-4ff4-b447-21ff68174180)


### Метрика №2. Рейсы, на которые не были проданы билеты:

 ![image](https://github.com/blaidex2/Postgres_Homework-11/assets/130083589/68c0754e-bb2f-49df-b8a8-a922f3659fa5)

### Метрика №3. Топ 10 самых популярных направлений:

![image](https://github.com/blaidex2/Postgres_Homework-11/assets/130083589/b6fce2db-0b7f-4f2e-ae0b-9499534f82be)

